FROM golang:1.22

WORKDIR /app

ARG DIST_VERSION=aws-authenticator_linux_amd64_v1
ARG DYNAMODB_REGION=eu-central-2
ARG DYNAMODB_TABLE_NAME=authenticator
ARG APP_ROUTER=LOGIN

ENV AWS_DYNAMODB_REGION=$DYNAMODB_REGION
ENV AWS_DYNAMODB_TABLE_NAME=$DYNAMODB_TABLE_NAME
ENV AWS_ROUTER=$APP_ROUTER

COPY dist/$DIST_VERSION/* ./

RUN chmod +x aws-authenticator

CMD ["/aws-authenticator"]